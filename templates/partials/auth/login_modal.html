{% load static %}
{% load socialaccount %}
<div
  id="login-modal"
  data-modal="login"
  class="fixed inset-0 z-50 hidden items-center justify-center px-4 py-6 backdrop-blur-sm transition"
>
  <div data-modal-overlay class="absolute inset-0 bg-black/60"></div>
  <div
    data-modal-panel
    class="relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden transform transition duration-300 scale-95 opacity-0"
  >
    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-primary/90 to-primary text-white">
      <h2 class="text-lg font-semibold">Вхід до DOMINIUM</h2>
      <button type="button" data-close-modal class="text-white hover:text-creamBeige transition">
        <i class="ri-close-line text-2xl"></i>
      </button>
    </div>

    <div class="px-6 py-6 space-y-5">
      {% if messages %}
        {% for message in messages %}
          {% if 'login' in message.tags %}
            <div class="px-4 py-3 rounded-[12px] bg-red-100 text-red-700 text-sm">
              {{ message }}
            </div>
          {% endif %}
        {% endfor %}
      {% endif %}

      <form id="login-form" method="POST" action="{% url 'login' %}" class="space-y-4">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ lm.next|default:'' }}">
        <div class="space-y-2">
          <label for="login-email" class="text-sm font-medium text-gray-700">Email, username або Telegram</label>
          <input
            type="text"
            name="email"
            id="login-email"
            value="{{ lm.email|default:'' }}"
            class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
            placeholder="name@example.com / username / @telegram"
          />
        </div>
        <div class="space-y-2">
          <label for="login-password" class="text-sm font-medium text-gray-700">Пароль</label>
          <div class="relative">
            <input
              type="password"
              name="password"
              id="login-password"
              class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent pr-12"
            />
            <button type="button" class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-primary transition" data-toggle-password="login-password">
              <i class="ri-eye-line text-xl"></i>
            </button>
          </div>
        </div>
        <button
          type="submit"
          class="w-full py-3 rounded-full bg-gradient-to-r from-primary via-coolSage to-creamBeige text-white font-semibold hover:from-primary/90 hover:via-coolSage/90 hover:to-creamBeige/90 transition shadow-lg shadow-primary/20"
        >
          Увійти
        </button>
      </form>

      <div class="border-t border-gray-100 pt-4 space-y-4">
        <div class="space-y-2">
          <p class="text-xs uppercase tracking-wide text-gray-400 text-center">Або увійдіть через</p>
          <div class="flex flex-col gap-2">
            <button
              type="button"
              data-google-auth
              data-auth-url="{% provider_login_url 'google' process='login' %}"
              class="w-full flex items-center justify-center gap-3 px-4 py-3 rounded-full border border-gray-300 bg-white hover:border-primary hover:shadow transition"
            >
              <span class="inline-flex items-center justify-center w-8 h-8 bg-white">
                <img src="{% static 'base/assets/img/google-logo.svg' %}" alt="Google" class="w-5 h-5" />
              </span>
              <span class="text-sm font-medium text-gray-700">Увійти через Google</span>
            </button>
          </div>
        </div>
        <p class="text-sm text-gray-600 text-center">
          Немає акаунта?
          <button type="button" class="text-primary hover:underline font-medium" data-switch-modal="register">Зареєструватися</button>
        </p>
      </div>
    </div>
  </div>
</div>
